"use strict";(self.webpackChunkwebsite_docusaurus=self.webpackChunkwebsite_docusaurus||[]).push([[3778],{855:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>a,frontMatter:()=>d,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"self-hosted/config","title":"Configuration","description":"While you can configure organization-specific settings in the administrator web interface, global settings are set using environment variables. Set these environment variables when running the Seatsurfing backend Docker container.","source":"@site/docs/self-hosted/config.md","sourceDirName":"self-hosted","slug":"/self-hosted/config","permalink":"/docs/self-hosted/config","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Kubernetes","permalink":"/docs/self-hosted/kubernetes"},"next":{"title":"Upgrading","permalink":"/docs/self-hosted/upgrading"}}');var i=s(4848),r=s(8453);const d={},l="Configuration",c={},o=[{value:"Example: Using Docker Compose",id:"example-using-docker-compose",level:2},{value:"List of environment variables",id:"list-of-environment-variables",level:2},{value:"Recommended M365 SMTP configuration",id:"recommended-m365-smtp-configuration",level:2},{value:"Security Notes",id:"security-notes",level:3},{value:"Troubleshooting",id:"troubleshooting",level:3}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"configuration",children:"Configuration"})}),"\n",(0,i.jsx)(n.p,{children:"While you can configure organization-specific settings in the administrator web interface, global settings are set using environment variables. Set these environment variables when running the Seatsurfing backend Docker container."}),"\n",(0,i.jsx)(n.h2,{id:"example-using-docker-compose",children:"Example: Using Docker Compose"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"environment:\n  POSTGRES_URL: 'postgres://seatsurfing:DB_PASSWORD@db/seatsurfing?sslmode=disable'\n  PUBLIC_LISTEN_ADDR: '0.0.0.0:8080'\n  ...\n"})}),"\n",(0,i.jsx)(n.h2,{id:"list-of-environment-variables",children:"List of environment variables"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Environment Variable"}),(0,i.jsx)(n.th,{children:"\xa0Type"}),(0,i.jsx)(n.th,{children:"\xa0Default"}),(0,i.jsx)(n.th,{children:"\xa0Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"DEV"}),(0,i.jsx)(n.td,{children:"bool"}),(0,i.jsx)(n.td,{children:"0"}),(0,i.jsx)(n.td,{children:"Development Mode, set to 1 to enable"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"PUBLIC_LISTEN_ADDR"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"0.0.0.0:8080"}),(0,i.jsx)(n.td,{children:"TCP/IP listen address and port"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"POSTGRES_URL"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsxs)(n.td,{children:["postgres://postgres",":root"," @ localhost/seatsurfing?sslmode=disable"]}),(0,i.jsx)(n.td,{children:"PostgreSQL Connection"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"JWT_PRIVATE_KEY"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Path to PEM file with RSA private key for JWT signing"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"JWT_PUBLIC_KEY"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Path to PEM file with RSA public key for JWT verification"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"SMTP_HOST"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"127.0.0.1"}),(0,i.jsx)(n.td,{children:"SMTP server address"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"SMTP_PORT"}),(0,i.jsx)(n.td,{children:"int"}),(0,i.jsx)(n.td,{children:"25"}),(0,i.jsx)(n.td,{children:"SMTP server port"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"SMTP_START_TLS"}),(0,i.jsx)(n.td,{children:"bool"}),(0,i.jsx)(n.td,{children:"0"}),(0,i.jsx)(n.td,{children:"Use SMTP STARTTLS extension, set to 1 to enable"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"SMTP_INSECURE_SKIP_VERIFY"}),(0,i.jsx)(n.td,{children:"bool"}),(0,i.jsx)(n.td,{children:"0"}),(0,i.jsx)(n.td,{children:"Disable SMTP TLS certificate validation"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"SMTP_AUTH"}),(0,i.jsx)(n.td,{children:"bool"}),(0,i.jsx)(n.td,{children:"0"}),(0,i.jsx)(n.td,{children:"SMTP authentication, set to 1 to enable"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"SMTP_AUTH_METHOD"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"PLAIN"}),(0,i.jsx)(n.td,{children:"SMTP authentication method: PLAIN or LOGIN"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"SMTP_AUTH_USER"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"\xa0"}),(0,i.jsx)(n.td,{children:"SMTP auth username"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"SMTP_AUTH_PASS"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"\xa0"}),(0,i.jsx)(n.td,{children:"SMTP auth password"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"MAIL_SENDER_ADDRESS"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"mailto:no-reply@seatsurfing.local",children:"no-reply@seatsurfing.local"})}),(0,i.jsx)(n.td,{children:"Mail sender address"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"MAIL_SERVICE"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"smtp"}),(0,i.jsx)(n.td,{children:"Mail send service (smtp = SMTP or acs = Azure Communication Services)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"ACS_HOST"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Azure Communication Services Host"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"ACS_ACCESS_KEY"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Azure Communication Services Access Key"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"MOCK_SENDMAIL"}),(0,i.jsx)(n.td,{children:"bool"}),(0,i.jsx)(n.td,{children:"0"}),(0,i.jsx)(n.td,{children:"SMTP mocking, set to 1 to enable"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"INIT_ORG_NAME"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Sample Company"}),(0,i.jsx)(n.td,{children:"Your organization's name"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"INIT_ORG_USER"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"admin"}),(0,i.jsx)(n.td,{children:"Your organization's admin username"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"INIT_ORG_PASS"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"12345678"}),(0,i.jsx)(n.td,{children:"Your organization's admin password"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"INIT_ORG_LANGUAGE"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"en"}),(0,i.jsx)(n.td,{children:"Your organization's ISO language code"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"ALLOW_ORG_DELETE"}),(0,i.jsx)(n.td,{children:"bool"}),(0,i.jsx)(n.td,{children:"0"}),(0,i.jsx)(n.td,{children:"Allow admins to delete their own organization"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"LOGIN_PROTECTION_MAX_FAILS"}),(0,i.jsx)(n.td,{children:"int"}),(0,i.jsx)(n.td,{children:"10"}),(0,i.jsx)(n.td,{children:"Number of failed login attempts before user gets banned"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"LOGIN_PROTECTION_SLIDING_WINDOW_SECONDS"}),(0,i.jsx)(n.td,{children:"int"}),(0,i.jsx)(n.td,{children:"600"}),(0,i.jsx)(n.td,{children:"Sliding window size in seconds for checking failed login attempts"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"LOGIN_PROTECTION_BAN_MINUTES"}),(0,i.jsx)(n.td,{children:"int"}),(0,i.jsx)(n.td,{children:"5"}),(0,i.jsx)(n.td,{children:"Ban time in minutes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"CRYPT_KEY"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"\xa0"}),(0,i.jsx)(n.td,{children:"A 32 bytes long string used for encrypting certain database fields"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"FILESYSTEM_BASE_PATH"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"current working directory\xa0"}),(0,i.jsx)(n.td,{children:"The base path for loading additional ressources"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"PUBLIC_SCHEME"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"https \xa0"}),(0,i.jsx)(n.td,{children:"The http scheme under which your server is publicly reachable"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"PUBLIC_PORT"}),(0,i.jsx)(n.td,{children:"int"}),(0,i.jsx)(n.td,{children:"443 \xa0"}),(0,i.jsx)(n.td,{children:"The http port under which your server is publicly reachable"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"STATIC_UI_PATH"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"/app/ui \xa0"}),(0,i.jsx)(n.td,{children:"The path to the static UI Web Assets"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"CACHE_TYPE"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"default \xa0"}),(0,i.jsx)(n.td,{children:"The cache to use ('default' = built-in, 'valkey' = Valkey.io)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"VALKEY_HOSTS"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"127.0.0.1:6379 \xa0"}),(0,i.jsx)(n.td,{children:"Comma-separated list of Valkey hosts"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"VALKEY_USERNAME"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"default \xa0"}),(0,i.jsx)(n.td,{children:"Valkey username"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"VALKEY_PASSWORD"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"\xa0"}),(0,i.jsx)(n.td,{children:"Valkey password"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"recommended-m365-smtp-configuration",children:"Recommended M365 SMTP configuration"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Please note:"})," Required option ",(0,i.jsx)(n.code,{children:"SMTP_AUTH_METHOD"})," has been added in version 1.44.0."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"MAIL_SERVICE=smtp\nSMTP_HOST=smtp.office365.com\nSMTP_PORT=587\nSMTP_START_TLS=1\nSMTP_AUTH=1\nSMTP_AUTH_METHOD=LOGIN\nSMTP_AUTH_USER=your-email@yourdomain.com\nSMTP_AUTH_PASS=your-app-password\nMAIL_SENDER_ADDRESS=your-email@yourdomain.com\n"})}),"\n",(0,i.jsx)(n.h3,{id:"security-notes",children:"Security Notes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Use App Passwords instead of regular passwords when possible"}),"\n",(0,i.jsxs)(n.li,{children:["Ensure STARTTLS is enabled (",(0,i.jsx)(n.code,{children:"SMTP_START_TLS=1"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["Never set ",(0,i.jsx)(n.code,{children:"SMTP_INSECURE_SKIP_VERIFY=1"})," in production"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.p,{children:"If emails still fail to send:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Verify your M365 account has SMTP AUTH enabled"}),"\n",(0,i.jsx)(n.li,{children:"Use an App Password instead of your regular password"}),"\n",(0,i.jsx)(n.li,{children:"Check that your firewall allows outbound connections to port 587"}),"\n",(0,i.jsx)(n.li,{children:"Enable debug logging to see detailed SMTP conversation"}),"\n",(0,i.jsx)(n.li,{children:"Try both PLAIN and LOGIN authentication methods"}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>l});var t=s(6540);const i={},r=t.createContext(i);function d(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);