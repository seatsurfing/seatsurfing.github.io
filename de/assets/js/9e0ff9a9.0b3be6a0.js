"use strict";(self.webpackChunkwebsite_docusaurus=self.webpackChunkwebsite_docusaurus||[]).push([[3778],{855:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>l,default:()=>a,frontMatter:()=>r,metadata:()=>d,toc:()=>o});const d=JSON.parse('{"id":"self-hosted/config","title":"Configuration","description":"While you can configure organization-specific settings in the administrator web interface, global settings are set using environment variables. Set these environment variables when running the Seatsurfing backend Docker container.","source":"@site/docs/self-hosted/config.md","sourceDirName":"self-hosted","slug":"/self-hosted/config","permalink":"/de/docs/self-hosted/config","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Kubernetes","permalink":"/de/docs/self-hosted/kubernetes"},"next":{"title":"Upgrading","permalink":"/de/docs/self-hosted/upgrading"}}');var t=n(4848),i=n(8453);const r={},l="Configuration",c={},o=[{value:"Example: Using Docker Compose",id:"example-using-docker-compose",level:2},{value:"List of environment variables",id:"list-of-environment-variables",level:2},{value:"Recommended M365 SMTP configuration",id:"recommended-m365-smtp-configuration",level:2},{value:"Security Notes",id:"security-notes",level:3},{value:"Troubleshooting",id:"troubleshooting",level:3}];function h(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"configuration",children:"Configuration"})}),"\n",(0,t.jsx)(s.p,{children:"While you can configure organization-specific settings in the administrator web interface, global settings are set using environment variables. Set these environment variables when running the Seatsurfing backend Docker container."}),"\n",(0,t.jsx)(s.h2,{id:"example-using-docker-compose",children:"Example: Using Docker Compose"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"environment:\n  POSTGRES_URL: 'postgres://seatsurfing:DB_PASSWORD@db/seatsurfing?sslmode=disable'\n  PUBLIC_LISTEN_ADDR: '0.0.0.0:8080'\n  ...\n"})}),"\n",(0,t.jsx)(s.h2,{id:"list-of-environment-variables",children:"List of environment variables"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Environment variable"}),(0,t.jsx)(s.th,{children:"Type"}),(0,t.jsx)(s.th,{children:"Default"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"ACS_ACCESS_KEY"}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{children:"Azure Communication Services Access Key"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"ACS_HOST"}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{children:"Azure Communication Services Host"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"ALLOW_ORG_DELETE"}),(0,t.jsx)(s.td,{children:"bool"}),(0,t.jsx)(s.td,{children:"0"}),(0,t.jsx)(s.td,{children:"Allow admins to delete their own organization"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"CACHE_TYPE"}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{children:"default"}),(0,t.jsxs)(s.td,{children:["The cache to use (",(0,t.jsx)(s.code,{children:"default"})," = built-in, ",(0,t.jsx)(s.code,{children:"valkey"})," = Valkey.io)"]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"CORS_ORIGINS"}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{}),(0,t.jsxs)(s.td,{children:["Origins for which CORS is enabled (",(0,t.jsx)(s.code,{children:"http://localhost:3000"})," is added in DEV mode)"]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"CRYPT_KEY"}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{children:"A 32 bytes long string used for encrypting certain database fields"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"DEV"}),(0,t.jsx)(s.td,{children:"bool"}),(0,t.jsx)(s.td,{children:"0"}),(0,t.jsx)(s.td,{children:"Development Mode, set to 1 to enable"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"DISABLE_PASSWORD_LOGIN"}),(0,t.jsx)(s.td,{children:"bool"}),(0,t.jsx)(s.td,{children:"0"}),(0,t.jsx)(s.td,{children:"Disable password-based login entirely (use SSO only)"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"DNS_SERVER"}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{children:"Custom DNS server, if specified without port (port 53 is used by default)"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"FILESYSTEM_BASE_PATH"}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{children:"current working directory"}),(0,t.jsx)(s.td,{children:"The base path for loading additional resources"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"INIT_ORG_LANGUAGE"}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{children:"en"}),(0,t.jsx)(s.td,{children:"Your organization's ISO language code"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"INIT_ORG_NAME"}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{children:"Sample Company"}),(0,t.jsx)(s.td,{children:"Your organization's name"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"INIT_ORG_PASS"}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{children:"12345678"}),(0,t.jsx)(s.td,{children:"Your organization's admin password"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"INIT_ORG_USER"}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{children:"admin"}),(0,t.jsx)(s.td,{children:"Your organization's admin username"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"JWT_PRIVATE_KEY"}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{children:"Path to PEM file with RSA private key for JWT signing"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"JWT_PUBLIC_KEY"}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{children:"Path to PEM file with RSA public key for JWT verification"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"LOGIN_PROTECTION_BAN_MINUTES"}),(0,t.jsx)(s.td,{children:"int"}),(0,t.jsx)(s.td,{children:"5"}),(0,t.jsx)(s.td,{children:"Ban time in minutes"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"LOGIN_PROTECTION_MAX_FAILS"}),(0,t.jsx)(s.td,{children:"int"}),(0,t.jsx)(s.td,{children:"10"}),(0,t.jsx)(s.td,{children:"Number of failed login attempts before user gets banned"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"LOGIN_PROTECTION_SLIDING_WINDOW_SECONDS"}),(0,t.jsx)(s.td,{children:"int"}),(0,t.jsx)(s.td,{children:"600"}),(0,t.jsx)(s.td,{children:"Sliding window size in seconds for checking failed login attempts"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"MAIL_SENDER_ADDRESS"}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.a,{href:"mailto:no-reply@seatsurfing.local",children:"no-reply@seatsurfing.local"})}),(0,t.jsx)(s.td,{children:"Mail sender address"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"MAIL_SERVICE"}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{children:"smtp"}),(0,t.jsx)(s.td,{children:"Mail send service ('smtp' = SMTP or 'acs' = Azure Communication Services)"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"MOCK_SENDMAIL"}),(0,t.jsx)(s.td,{children:"bool"}),(0,t.jsx)(s.td,{children:"0"}),(0,t.jsx)(s.td,{children:"SMTP mocking, set to 1 to enable"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"POSTGRES_URL"}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsxs)(s.td,{children:["postgres://postgres",":root"," @ localhost/seatsurfing?sslmode=disable"]}),(0,t.jsx)(s.td,{children:"PostgreSQL Connection"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"PUBLIC_LISTEN_ADDR"}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{children:"0.0.0.0:8080"}),(0,t.jsx)(s.td,{children:"TCP/IP listen address and port"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"PUBLIC_PORT"}),(0,t.jsx)(s.td,{children:"int"}),(0,t.jsx)(s.td,{children:"443"}),(0,t.jsx)(s.td,{children:"The http port under which your server is publicly reachable"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"PUBLIC_SCHEME"}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{children:"https"}),(0,t.jsx)(s.td,{children:"The http scheme under which your server is publicly reachable"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"SMTP_AUTH"}),(0,t.jsx)(s.td,{children:"bool"}),(0,t.jsx)(s.td,{children:"0"}),(0,t.jsx)(s.td,{children:"SMTP authentication, set to 1 to enable"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"SMTP_AUTH_METHOD"}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{children:"PLAIN"}),(0,t.jsx)(s.td,{children:"SMTP authentication method: PLAIN or LOGIN"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"SMTP_AUTH_PASS"}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{children:"SMTP auth password"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"SMTP_AUTH_USER"}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{children:"SMTP auth username"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"SMTP_HOST"}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{children:"127.0.0.1"}),(0,t.jsx)(s.td,{children:"SMTP server address"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"SMTP_INSECURE_SKIP_VERIFY"}),(0,t.jsx)(s.td,{children:"bool"}),(0,t.jsx)(s.td,{children:"0"}),(0,t.jsx)(s.td,{children:"Disable SMTP TLS certificate validation"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"SMTP_PORT"}),(0,t.jsx)(s.td,{children:"int"}),(0,t.jsx)(s.td,{children:"25"}),(0,t.jsx)(s.td,{children:"SMTP server port"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"SMTP_START_TLS"}),(0,t.jsx)(s.td,{children:"bool"}),(0,t.jsx)(s.td,{children:"0"}),(0,t.jsx)(s.td,{children:"Use SMTP STARTTLS extension, set to 1 to enable"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"STATIC_UI_PATH"}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{children:"/app/ui"}),(0,t.jsx)(s.td,{children:"The path to the static UI Web Assets"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"VALKEY_HOSTS"}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{children:"127.0.0.1:6379"}),(0,t.jsx)(s.td,{children:"Comma-separated list of Valkey hosts"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"VALKEY_PASSWORD"}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{children:"Valkey password"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"VALKEY_USERNAME"}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{children:"default"}),(0,t.jsx)(s.td,{children:"Valkey username"})]})]})]}),"\n",(0,t.jsx)(s.h2,{id:"recommended-m365-smtp-configuration",children:"Recommended M365 SMTP configuration"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Please note:"})," Required option ",(0,t.jsx)(s.code,{children:"SMTP_AUTH_METHOD"})," has been added in version 1.44.0."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"MAIL_SERVICE=smtp\nSMTP_HOST=smtp.office365.com\nSMTP_PORT=587\nSMTP_START_TLS=1\nSMTP_AUTH=1\nSMTP_AUTH_METHOD=LOGIN\nSMTP_AUTH_USER=your-email@yourdomain.com\nSMTP_AUTH_PASS=your-app-password\nMAIL_SENDER_ADDRESS=your-email@yourdomain.com\n"})}),"\n",(0,t.jsx)(s.h3,{id:"security-notes",children:"Security Notes"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Use App Passwords instead of regular passwords when possible"}),"\n",(0,t.jsxs)(s.li,{children:["Ensure STARTTLS is enabled (",(0,t.jsx)(s.code,{children:"SMTP_START_TLS=1"}),")"]}),"\n",(0,t.jsxs)(s.li,{children:["Never set ",(0,t.jsx)(s.code,{children:"SMTP_INSECURE_SKIP_VERIFY=1"})," in production"]}),"\n",(0,t.jsxs)(s.li,{children:["If you explicitly need unencrypted SMTP (for local delivery for example), you need to set ",(0,t.jsx)(s.code,{children:"SMTP_START_TLS=0"})]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(s.p,{children:"If emails still fail to send:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsx)(s.li,{children:"Verify your M365 account has SMTP AUTH enabled"}),"\n",(0,t.jsx)(s.li,{children:"Use an App Password instead of your regular password"}),"\n",(0,t.jsx)(s.li,{children:"Check that your firewall allows outbound connections to port 587"}),"\n",(0,t.jsx)(s.li,{children:"Enable debug logging to see detailed SMTP conversation"}),"\n",(0,t.jsx)(s.li,{children:"Try both PLAIN and LOGIN authentication methods"}),"\n"]})]})}function a(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>l});var d=n(6540);const t={},i=d.createContext(t);function r(e){const s=d.useContext(i);return d.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),d.createElement(i.Provider,{value:s},e.children)}}}]);